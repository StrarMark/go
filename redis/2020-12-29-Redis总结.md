#### 什么是缓存雪崩、穿透、击穿

 - 雪崩：瞬时大量缓存过期或者缓存服务宕机，所有请求都访问数据库
    - 在业务允许的范围内，对 key 的过期时间设置一定随机值
    - 服务降级：当处在高并发场景下，暂时舍弃一些非核心接口和数据的请求
 - 穿透：数据库与缓存中都没有符合条件的数据，所有请求都会请求到 DB，丧失了缓存的意义
    - 缓存空结果或者特定默认值，PS：过期时间不要太大
    - 布隆过滤器：将 DB 数据存储到过滤器中，通过过滤器判定数据可能存在后再请求 DB
 - 击穿：某一热点 key 数据过期，大量并发同时请求该 key，击穿缓存后直接请求到数据库
 > 先来分析下出现这个问题的原因，1.缓存失效，业务流程终止，例如营销活动时间有效期等 2.缓存失效，需要重新写入缓存
    - 针对第一个问题，可以配合前端做一些限制，比如时间过期，前端屏蔽到后端的请求入口
    - 针对第二个问题，可以对重新写入缓存流程里添加互斥锁，读不到缓存的进行重试
    - 数据永不过期？

#### Redis 高可用演进方案

 - 持久化：最简单的高可用手段，将数据保存到磁盘，保证数据不会因为服务器进程退出而丢失
 - 主从复制：Redis 高可用基础，哨兵和集群都是在复制的基础上完成的，主要用于多机备份，以及读操作的负载均衡和简单的故障恢复
    - 缺陷：出现故障无法自动化恢复，写操作无法负载均衡，存储能力受到单机能力限制
 - 哨兵：在复制的基础上，完成了自动化的故障检测与恢复功能
    - 缺陷：写操作无法负载均衡，存储能力受到单机能力限制
 - 集群：可以解决故障恢复、写操作负载均衡，存储能力能问题，实现了较为完备的高可用方案

#### 参考

![深入学习Redis（4）：哨兵](https://www.cnblogs.com/kismetv/p/9609938.html)