### 一、键过期删除策略

#### 1.1 定时删除

在设置键的过期时间的同时，创建一个定时器，让定时器在键过期时立即执行对键的删除操作。

定时删除策略可以保证过期键在第一时间删除，并释放所占内存，但是缺点也很明显：如果过期键比较多，删除键的过程会占用 CPU 的时间，对服务器的响应时间与吞吐量造成影响。

#### 1.2 惰性删除

不管键的过期时间，每次从键空间中获取键时，检查取得的键是否过期，如果没有过期，则返回该键，如果过期，则删除该键，并返回空。

惰性删除不会在删除无关的过期键上花费时间，对 CPU 时间相对友好，但是对 CPU 内存来说就很不友好了，如果内存在大量的非活跃过期键，这些键会一直占用 CPU 内存，直至获取时才会释放。

#### 1.3 定期删除

每隔一段时间，程序就对数据库进行一次检查，删除里面的过期键，至于时间周期，检查的数据库个数由算法决定。

定期删除策略是上面两种策略的整合和折中，如果采用定期删除策略，必须根据实际情况，合理的设置删除操作的执行时长和执行效率。

### 二、Redis 键过期删除策略

Redis 采用的是惰性删除和定期删除两种策略。 
r
### 参考

《Redis 设计与实现》 黄建宏 著 <br>